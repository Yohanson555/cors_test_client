(window.webpackJsonpcors_test_client=window.webpackJsonpcors_test_client||[]).push([[0],{155:function(e,t,a){"use strict";(function(e){var n=a(63),i=a.n(n),r=a(105),l=a(156),s=a(157),o=a(177),c=a(158),u=a(178),h=a(159),d=a.n(h),m=a(160),p=a.n(m),f=a(0),v=a.n(f),g=a(65),b=a(180),y=a(181),k=a(44),E=a(389),w=a(8),C=a(388),x=a(83),S=a(387),O=a(23),j=a(106),P=a.n(j),A=(g.a.Header,g.a.Footer,g.a.Sider,g.a.Content),I=b.a.Meta,N=y.a.TextArea;function T(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var B=function(t){function a(){var e;return Object(l.a)(this,a),(e=Object(o.a)(this,Object(c.a)(a).call(this))).state={items:[],visible:!1,text:null,title:null,file:null,filelist:null,loading:!1,url:"https://blob-test-server.herokuapp.com"},e}return Object(u.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setAuthCookie(),this.getList()}},{key:"setAuthCookie",value:function(){p.a.save("auth","itsmeipromise",{path:"/"})}},{key:"getList",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.url,P.a.get("".concat(t,"/list")).then((function(e){var t=e.data;t&&t.length>0&&a.setState({items:t})})).catch((function(e){k.a.error("Error occurred while fetching list: ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){var e=!1,t=this.state,a=t.title,n=t.text,i=t.file;a&&""!==a||(k.a.error("Please enter posts title"),e=!0),n&&""!==n||(k.a.error("Please enter posts anons"),e=!0),i||(k.a.error("Please select posts preview image"),e=!0),e||this.sendData()}},{key:"handleCancel",value:function(){this.setState({visible:!1,filelist:null,file:null,text:null,loading:!1,title:null})}},{key:"handleInputChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleTextareaChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleUploadChange",value:function(e){var t=e.file;console.log(e),this.setState({filelist:[t],file:t})}},{key:"renderPosts",value:function(){var e=this,t=this.state.items;return null==t||t.length<=0?v.a.createElement(E.a,{message:"Warning",description:"No blog posts found. Try add some.",type:"warning",showIcon:!0}):v.a.createElement("div",{className:"grid-container"},d.a.map(t,(function(t){return e.renderBlogCard(t)})))}},{key:"renderBlogCard",value:function(e){if(!e)return null;var t=this.state.url,a=e.title,n=e.text,i=e.image;return v.a.createElement("div",{className:"grid-cell"},v.a.createElement(b.a,{cover:v.a.createElement("img",{alt:"example",src:"".concat(t,"/img?id=").concat(i)}),actions:[v.a.createElement(w.a,{type:"setting",key:"setting"}),v.a.createElement(w.a,{type:"edit",key:"edit"}),v.a.createElement(w.a,{type:"ellipsis",key:"ellipsis"})]},v.a.createElement(I,{title:a,description:n})))}},{key:"sendData",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,r,l,s,o,c,u,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.title,n=t.text,r=t.file,l=t.url,s=t.items,e.next=3,T(r.originFileObj);case 3:o=e.sent,this.setState({loading:!0}),c={auth:"itsmeipromise",title:a,text:n,image:o},JSON.stringify(c),u={timeout:1e4,headers:{"Content-Type":"text/plain"}},P.a.post("".concat(l,"/post"),c,u).then((function(e){var t=e.data;console.log("Result: ",t),t&&"success"===t.result?(k.a.success("Your post successfully added"),s.push(t.item)):k.a.error(t.error.join("<br>")),h.setState({loading:!1,items:s})})).catch((function(e){h.setState({loading:!1}),k.a.error("Error occurred while fetchong: ".concat(e))}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,a=this.state,n=a.visible,i=a.title,r=a.text,l=a.filelist,s=a.loading;return console.log("Process:",e),v.a.createElement(g.a,null,v.a.createElement(A,null,this.renderPosts()),v.a.createElement(C.a,{title:"Add post",visible:n,okButtonProps:{loading:s},onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},v.a.createElement(x.a,{onSubmit:this.handleSubmit,ref:function(e){return t.form=e}},v.a.createElement(x.a.Item,{label:"Title"},v.a.createElement(y.a,{value:i,onChange:this.handleInputChange.bind(this)})),v.a.createElement(x.a.Item,{label:"Anons"},v.a.createElement(N,{value:r,rows:4,onChange:this.handleTextareaChange.bind(this)})),v.a.createElement(x.a.Item,{label:"Preview"},v.a.createElement(S.a,{onChange:this.handleUploadChange.bind(this),multiple:!1,fileList:l},v.a.createElement(O.a,null,v.a.createElement(w.a,{type:"upload"})," Upload"))))),v.a.createElement("div",{className:"float-bottom-button right"},v.a.createElement(O.a,{type:"primary",shape:"circle",icon:"plus",onClick:this.showModal.bind(this),size:"large"})))}}]),a}(f.Component);t.a=B}).call(this,a(52))},184:function(e,t,a){e.exports=a(386)},189:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),l=a.n(r),s=(a(189),a(155)),o=a(175);var c=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(o.a,null,i.a.createElement(s.a,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(385);l.a.render(i.a.createElement(c,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[184,1,2]]]);
//# sourceMappingURL=main.4738f907.chunk.js.map