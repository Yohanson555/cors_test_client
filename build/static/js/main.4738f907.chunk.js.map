{"version":3,"sources":["components/Blogger.js","App.js","serviceWorker.js","index.js"],"names":["Content","Layout","Header","Footer","Sider","Meta","Card","TextArea","Input","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","Blogger","state","items","visible","text","title","filelist","loading","url","this","setAuthCookie","getList","cookie","save","path","Axios","get","then","data","length","setState","catch","e","message","err","sendData","event","target","value","console","log","description","type","showIcon","className","_","map","item","renderBlogCard","image","cover","alt","src","actions","key","originFileObj","img","auth","JSON","stringify","config","timeout","headers","post","success","push","join","process","renderPosts","okButtonProps","onOk","handleOk","bind","onCancel","handleCancel","onSubmit","handleSubmit","ref","form","Item","label","onChange","handleInputChange","rows","handleTextareaChange","handleUploadChange","multiple","fileList","shape","icon","onClick","showModal","size","Component","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4738f907.chunk.js","sourcesContent":["import _ from 'lodash';\r\nimport cookie from 'react-cookies'\r\nimport React, { Component } from 'react';\r\nimport { Layout, Button, Modal, Form, Input, Upload, Icon, Alert, message, Card } from 'antd';\r\nimport Axios from 'axios';\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\nconst { Meta } = Card;\r\n\r\nconst { TextArea } = Input;\r\n\r\nfunction getBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n    });\r\n}\r\n\r\n\r\nclass Blogger extends Component {\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            items: [],\r\n            visible: false,\r\n            text: null,\r\n            title: null,\r\n            file: null,\r\n            filelist: null,\r\n            loading: false,\r\n            url: 'https://blob-test-server.herokuapp.com'\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setAuthCookie();\r\n        this.getList();\r\n    }\r\n\r\n    setAuthCookie() {\r\n        cookie.save('auth', 'itsmeipromise', { path: '/' });\r\n    };\r\n\r\n    async getList() {\r\n        const { url } = this.state;\r\n\r\n        Axios.get(`${url}/list`)\r\n            .then(({ data }) => {\r\n                if (data && data.length > 0) {\r\n                    this.setState({\r\n                        items: data\r\n                    });\r\n                }\r\n            }).catch((e) => {\r\n                message.error(`Error occurred while fetching list: ${e}`);\r\n            });\r\n    }\r\n\r\n    showModal() {\r\n        this.setState({\r\n            visible: true\r\n        });\r\n    }\r\n\r\n    handleOk() {\r\n        let err = false;\r\n        const { title, text, file } = this.state;\r\n\r\n        if (!title || title === '') {\r\n            message.error('Please enter posts title');\r\n            err = true;\r\n        }\r\n\r\n        if (!text || text === '') {\r\n            message.error('Please enter posts anons');\r\n            err = true;\r\n        }\r\n\r\n        if (!file) {\r\n            message.error('Please select posts preview image');\r\n            err = true;\r\n        }\r\n\r\n        if (!err) {\r\n            this.sendData();\r\n        }\r\n    }\r\n\r\n    handleCancel() {\r\n        this.setState({\r\n            visible: false,\r\n            filelist: null,\r\n            file: null,\r\n            text: null,\r\n            loading: false,\r\n            title: null\r\n        });\r\n    }\r\n\r\n    handleInputChange(event) {\r\n        this.setState({ title: event.target.value });\r\n    }\r\n\r\n    handleTextareaChange(event) {\r\n        this.setState({ text: event.target.value });\r\n    }\r\n\r\n    handleUploadChange(event) {\r\n        let file = event.file;\r\n\r\n        console.log(event);\r\n\r\n        this.setState({ filelist: [file], file });\r\n    }\r\n\r\n    renderPosts() {\r\n        const { items } = this.state;\r\n\r\n        if (items == null || items.length <= 0) {\r\n            return (\r\n                <Alert\r\n                    message=\"Warning\"\r\n                    description=\"No blog posts found. Try add some.\"\r\n                    type=\"warning\"\r\n                    showIcon\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"grid-container\">\r\n                {\r\n                    _.map(items, (item) => {\r\n                        return this.renderBlogCard(item);\r\n                    })\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderBlogCard(item) {\r\n        if (!item) return null;\r\n        const { url } = this.state;\r\n        const { title, text, image } = item;\r\n\r\n        return (\r\n            <div className=\"grid-cell\">\r\n                <Card\r\n                    //style={{ width: 300 }}\r\n                    cover={\r\n                        <img\r\n                            alt=\"example\"\r\n                            src={`${url}/img?id=${image}`}\r\n                        />\r\n                    }\r\n                    actions={[\r\n                        <Icon type=\"setting\" key=\"setting\" />,\r\n                        <Icon type=\"edit\" key=\"edit\" />,\r\n                        <Icon type=\"ellipsis\" key=\"ellipsis\" />,\r\n                    ]}\r\n                >\r\n                    <Meta\r\n                        //avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\r\n                        title={title}\r\n                        description={text}\r\n                    />\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    async sendData() {\r\n        const { title, text, file, url, items } = this.state;\r\n\r\n        const img = await getBase64(file.originFileObj)\r\n\r\n        this.setState({\r\n            loading: true\r\n        });\r\n\r\n        const data = {\r\n            auth: 'itsmeipromise',\r\n            title,\r\n            text,\r\n            image: img\r\n        }\r\n\r\n        const stringData = JSON.stringify(data);\r\n\r\n        const config = {\r\n            timeout: 10000,\r\n            headers: {\r\n                'Content-Type': 'text/plain'\r\n                //'Content-Type': 'application/json'\r\n            },\r\n\r\n        };\r\n\r\n        Axios.post(`${url}/post`, data, config).then(({ data }) => {\r\n            console.log('Result: ', data);\r\n\r\n            if (data && data.result === 'success') {\r\n                message.success('Your post successfully added');\r\n\r\n                items.push(data.item);\r\n            } else {\r\n                message.error(data.error.join('<br>'));\r\n            }\r\n\r\n            this.setState({\r\n                loading: false,\r\n                items\r\n            });\r\n        }).catch((e) => {\r\n            this.setState({\r\n                loading: false\r\n            });\r\n            message.error(`Error occurred while fetchong: ${e}`);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { visible, title, text, filelist, loading } = this.state;\r\n\r\n        console.log('Process:', process);\r\n\r\n        return (\r\n            <Layout>\r\n                <Content>\r\n                    {this.renderPosts()}\r\n                </Content>\r\n\r\n                <Modal\r\n                    title=\"Add post\"\r\n                    visible={visible}\r\n                    okButtonProps={{\r\n                        loading: loading\r\n                    }}\r\n                    onOk={this.handleOk.bind(this)}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n                >\r\n                    <Form onSubmit={this.handleSubmit} ref={ref => this.form = ref}>\r\n                        <Form.Item label=\"Title\">\r\n                            <Input\r\n                                value={title}\r\n                                onChange={this.handleInputChange.bind(this)}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item label=\"Anons\">\r\n                            <TextArea\r\n                                value={text}\r\n                                rows={4}\r\n                                onChange={this.handleTextareaChange.bind(this)}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item label=\"Preview\">\r\n                            <Upload onChange={this.handleUploadChange.bind(this)} multiple={false} fileList={filelist}>\r\n                                <Button>\r\n                                    <Icon type=\"upload\" /> Upload\r\n                                </Button>\r\n                            </Upload>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </Modal>\r\n\r\n                <div className=\"float-bottom-button right\">\r\n                    <Button\r\n                        type=\"primary\"\r\n                        shape=\"circle\"\r\n                        icon=\"plus\"\r\n                        onClick={this.showModal.bind(this)}\r\n                        size=\"large\"\r\n\r\n                    />\r\n                </div>\r\n            </Layout >\r\n        );\r\n    }\r\n}\r\n\r\nexport default Blogger;","import React from 'react';\nimport './App.css';\nimport Blogger from './components/Blogger';\nimport { CookiesProvider } from 'react-cookie';\n\nfunction App() {\n  return (\n    <div className=\"App\" >\n      <CookiesProvider>\n        <Blogger />\n      </CookiesProvider>\n    </div>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}